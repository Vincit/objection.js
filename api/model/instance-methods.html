<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Instance Methods | Objection.js</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="An SQL friendly ORM for node.js">
    
    <link rel="preload" href="/objection.js/assets/css/0.styles.3da53256.css" as="style"><link rel="preload" href="/objection.js/assets/js/app.51116b66.js" as="script"><link rel="preload" href="/objection.js/assets/js/2.95f20b73.js" as="script"><link rel="preload" href="/objection.js/assets/js/1.317fd1a4.js" as="script"><link rel="preload" href="/objection.js/assets/js/29.ba4de844.js" as="script"><link rel="prefetch" href="/objection.js/assets/js/10.035340d9.js"><link rel="prefetch" href="/objection.js/assets/js/11.39c398b3.js"><link rel="prefetch" href="/objection.js/assets/js/14.bb8bba7c.js"><link rel="prefetch" href="/objection.js/assets/js/15.bc71fa15.js"><link rel="prefetch" href="/objection.js/assets/js/16.1015d7dd.js"><link rel="prefetch" href="/objection.js/assets/js/17.ab0dd903.js"><link rel="prefetch" href="/objection.js/assets/js/18.a3b06a8a.js"><link rel="prefetch" href="/objection.js/assets/js/19.5c3531e2.js"><link rel="prefetch" href="/objection.js/assets/js/20.2af5813f.js"><link rel="prefetch" href="/objection.js/assets/js/21.6a6c2510.js"><link rel="prefetch" href="/objection.js/assets/js/22.eee14584.js"><link rel="prefetch" href="/objection.js/assets/js/23.6778d240.js"><link rel="prefetch" href="/objection.js/assets/js/24.c29fb8d5.js"><link rel="prefetch" href="/objection.js/assets/js/25.b88ad4e1.js"><link rel="prefetch" href="/objection.js/assets/js/26.9731c624.js"><link rel="prefetch" href="/objection.js/assets/js/27.c17291dd.js"><link rel="prefetch" href="/objection.js/assets/js/28.9cd4116c.js"><link rel="prefetch" href="/objection.js/assets/js/3.67dbd821.js"><link rel="prefetch" href="/objection.js/assets/js/30.a4bb6cf5.js"><link rel="prefetch" href="/objection.js/assets/js/31.8e063863.js"><link rel="prefetch" href="/objection.js/assets/js/32.969a651e.js"><link rel="prefetch" href="/objection.js/assets/js/33.52185d77.js"><link rel="prefetch" href="/objection.js/assets/js/34.aebcecdc.js"><link rel="prefetch" href="/objection.js/assets/js/35.dc337a3b.js"><link rel="prefetch" href="/objection.js/assets/js/36.ca21b774.js"><link rel="prefetch" href="/objection.js/assets/js/37.02267c3f.js"><link rel="prefetch" href="/objection.js/assets/js/38.85569788.js"><link rel="prefetch" href="/objection.js/assets/js/39.d9a248b2.js"><link rel="prefetch" href="/objection.js/assets/js/4.45d2dbd6.js"><link rel="prefetch" href="/objection.js/assets/js/40.27397661.js"><link rel="prefetch" href="/objection.js/assets/js/41.223cb4e0.js"><link rel="prefetch" href="/objection.js/assets/js/42.2e35f594.js"><link rel="prefetch" href="/objection.js/assets/js/43.41db43f9.js"><link rel="prefetch" href="/objection.js/assets/js/44.254e7ab0.js"><link rel="prefetch" href="/objection.js/assets/js/45.7ac878fb.js"><link rel="prefetch" href="/objection.js/assets/js/46.7926c441.js"><link rel="prefetch" href="/objection.js/assets/js/47.39b80d10.js"><link rel="prefetch" href="/objection.js/assets/js/48.b564dbac.js"><link rel="prefetch" href="/objection.js/assets/js/49.a31c4e2f.js"><link rel="prefetch" href="/objection.js/assets/js/5.4784c48b.js"><link rel="prefetch" href="/objection.js/assets/js/50.e7cbb678.js"><link rel="prefetch" href="/objection.js/assets/js/51.fb64ca09.js"><link rel="prefetch" href="/objection.js/assets/js/52.8f1c164a.js"><link rel="prefetch" href="/objection.js/assets/js/53.f3efca5d.js"><link rel="prefetch" href="/objection.js/assets/js/54.bc53d728.js"><link rel="prefetch" href="/objection.js/assets/js/55.8659ee58.js"><link rel="prefetch" href="/objection.js/assets/js/56.3cec4251.js"><link rel="prefetch" href="/objection.js/assets/js/57.dd68f0ab.js"><link rel="prefetch" href="/objection.js/assets/js/58.f88cec37.js"><link rel="prefetch" href="/objection.js/assets/js/59.9a4f4852.js"><link rel="prefetch" href="/objection.js/assets/js/6.d162f3c7.js"><link rel="prefetch" href="/objection.js/assets/js/60.b0b2da17.js"><link rel="prefetch" href="/objection.js/assets/js/61.0d93e8f8.js"><link rel="prefetch" href="/objection.js/assets/js/62.2f6a782f.js"><link rel="prefetch" href="/objection.js/assets/js/63.7f748604.js"><link rel="prefetch" href="/objection.js/assets/js/64.bb75ecbf.js"><link rel="prefetch" href="/objection.js/assets/js/65.78122383.js"><link rel="prefetch" href="/objection.js/assets/js/66.b153c1ca.js"><link rel="prefetch" href="/objection.js/assets/js/67.092d4125.js"><link rel="prefetch" href="/objection.js/assets/js/68.84a4f227.js"><link rel="prefetch" href="/objection.js/assets/js/69.1be647c6.js"><link rel="prefetch" href="/objection.js/assets/js/7.a905ae32.js"><link rel="prefetch" href="/objection.js/assets/js/70.8bc158ff.js"><link rel="prefetch" href="/objection.js/assets/js/71.1caae563.js"><link rel="prefetch" href="/objection.js/assets/js/72.9fe3e8ea.js"><link rel="prefetch" href="/objection.js/assets/js/73.adc7a66e.js"><link rel="prefetch" href="/objection.js/assets/js/74.ca611b91.js"><link rel="prefetch" href="/objection.js/assets/js/75.3f83663e.js"><link rel="prefetch" href="/objection.js/assets/js/8.e75082ac.js"><link rel="prefetch" href="/objection.js/assets/js/9.894cd644.js"><link rel="prefetch" href="/objection.js/assets/js/vendors~docsearch.08d45e08.js">
    <link rel="stylesheet" href="/objection.js/assets/css/0.styles.3da53256.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/objection.js/" class="home-link router-link-active"><!----> <span class="site-name">Objection.js</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/objection.js/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Reference" class="dropdown-title"><span class="title">API Reference</span> <span class="arrow down"></span></button> <button type="button" aria-label="API Reference" class="mobile-dropdown-title"><span class="title">API Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/api/objection/" class="nav-link">
  Main Module
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/query-builder/" class="nav-link">
  Query Builder
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/model/" class="nav-link router-link-active">
  Model
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/types/" class="nav-link">
  Types
</a></li></ul></div></div><div class="nav-item"><a href="/objection.js/recipes/" class="nav-link">
  Recipe Book
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Release Notes" class="dropdown-title"><span class="title">Release Notes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Release Notes" class="mobile-dropdown-title"><span class="title">Release Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/changelog.html" class="nav-link">
  Changelog
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/migration.html" class="nav-link">
  Migration to 3.0
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v2/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v2.x documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v1/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐ Star
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/objection.js/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Reference" class="dropdown-title"><span class="title">API Reference</span> <span class="arrow down"></span></button> <button type="button" aria-label="API Reference" class="mobile-dropdown-title"><span class="title">API Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/api/objection/" class="nav-link">
  Main Module
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/query-builder/" class="nav-link">
  Query Builder
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/model/" class="nav-link router-link-active">
  Model
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/types/" class="nav-link">
  Types
</a></li></ul></div></div><div class="nav-item"><a href="/objection.js/recipes/" class="nav-link">
  Recipe Book
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Release Notes" class="dropdown-title"><span class="title">Release Notes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Release Notes" class="mobile-dropdown-title"><span class="title">Release Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/changelog.html" class="nav-link">
  Changelog
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/migration.html" class="nav-link">
  Migration to 3.0
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v2/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v2.x documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v1/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐ Star
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Model API Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/objection.js/api/model/overview.html" class="sidebar-link">Overview</a></li><li><a href="/objection.js/api/model/static-properties.html" class="sidebar-link">Static Properties</a></li><li><a href="/objection.js/api/model/static-methods.html" class="sidebar-link">Static Methods</a></li><li><a href="/objection.js/api/model/instance-methods.html" aria-current="page" class="active sidebar-link">Instance Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#query" class="sidebar-link">$query()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#relatedquery" class="sidebar-link">$relatedQuery()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#beforeinsert" class="sidebar-link">$beforeInsert()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#afterinsert" class="sidebar-link">$afterInsert()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#beforeupdate" class="sidebar-link">$beforeUpdate()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#afterupdate" class="sidebar-link">$afterUpdate()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#beforedelete" class="sidebar-link">$beforeDelete()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#afterdelete" class="sidebar-link">$afterDelete()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#afterfind" class="sidebar-link">$afterFind()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#clone" class="sidebar-link">$clone()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#tojson" class="sidebar-link">toJSON()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#tojson-2" class="sidebar-link">$toJson()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#todatabasejson" class="sidebar-link">$toDatabaseJson()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#parsedatabasejson" class="sidebar-link">$parseDatabaseJson()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#formatdatabasejson" class="sidebar-link">$formatDatabaseJson()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#parsejson" class="sidebar-link">$parseJson()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#formatjson" class="sidebar-link">$formatJson()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#setjson" class="sidebar-link">$setJson()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#setdatabasejson" class="sidebar-link">$setDatabaseJson()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#set" class="sidebar-link">$set()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#setrelated" class="sidebar-link">$setRelated()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#appendrelated" class="sidebar-link">$appendRelated()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#fetchgraph" class="sidebar-link">$fetchGraph()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#traverse" class="sidebar-link">$traverse()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#traverseasync" class="sidebar-link">$traverseAsync()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#knex" class="sidebar-link">$knex()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#transaction" class="sidebar-link">$transaction()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#id" class="sidebar-link">$id()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#beforevalidate" class="sidebar-link">$beforeValidate()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#aftervalidate" class="sidebar-link">$afterValidate()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#validate" class="sidebar-link">$validate()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#omit" class="sidebar-link">$omit()</a></li><li class="sidebar-sub-header"><a href="/objection.js/api/model/instance-methods.html#pick" class="sidebar-link">$pick()</a></li></ul></li><li><a href="/objection.js/api/model/instance-properties.html" class="sidebar-link">Instance Properties</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="instance-methods"><a href="#instance-methods" class="header-anchor">#</a> Instance Methods</h1> <p>All instance methods start with the character <code>$</code> to prevent them from colliding with the database column names.</p> <h2 id="query"><a href="#query" class="header-anchor">#</a> $query()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> queryBuilder <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">$query</span><span class="token punctuation">(</span>transactionOrKnex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Creates a query builder for this model instance.</p> <p>All queries built using the returned builder only affect this instance.</p> <h5 id="arguments"><a href="#arguments" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>transactionOrKnex</td> <td>object</td> <td>Optional transaction or knex instance for the query. This can be used to specify a transaction or even a different database for a query. Falsy values are ignored.</td></tr></tbody></table> <h5 id="return-value"><a href="#return-value" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/query-builder/">QueryBuilder</a></td> <td>query builder</td></tr></tbody></table> <h5 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h5> <p>Re-fetch an item from the database:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// If you need to refresh the same instance you can do this:</span>
<span class="token keyword">const</span> reFetchedPerson <span class="token operator">=</span> <span class="token keyword">await</span> person<span class="token punctuation">.</span><span class="token function">$query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Note that `person` did not get modified by the fetch.</span>
person<span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span>reFetchedPerson<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Insert a new item to database:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> jennifer <span class="token operator">=</span> <span class="token keyword">await</span> Person<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Jennifer'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">$query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jennifer<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Patch an item:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> person<span class="token punctuation">.</span><span class="token function">$query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Cooper'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'person updated'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Delete an item.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> person<span class="token punctuation">.</span><span class="token function">$query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'person deleted'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="relatedquery"><a href="#relatedquery" class="header-anchor">#</a> $relatedQuery()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> builder <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span>relationName<span class="token punctuation">,</span> transactionOrKnex<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Use this to build a query that only affects items related through a relation.</p> <p>See the examples below and <a href="/objection.js/guide/query-examples.html#relation-queries">here</a>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>This methods is just a shortcut for this call to the static <a href="/objection.js/api/model/static-methods.html#static-relatedquery">relatedQuery</a> method:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> builder <span class="token operator">=</span> Person<span class="token punctuation">.</span><span class="token function">relatedQuery</span><span class="token punctuation">(</span>relationName<span class="token punctuation">,</span> transactionOrKnex<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span>
  person
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <h5 id="arguments-2"><a href="#arguments-2" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>relationName</td> <td>string</td> <td>The name of the relation to query.</td></tr> <tr><td>transactionOrKnex</td> <td>object</td> <td>Optional transaction or knex instance for the query. This can be used to specify a transaction or even a different database for a query. Falsy values are ignored.</td></tr></tbody></table> <h5 id="return-value-2"><a href="#return-value-2" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/query-builder/">QueryBuilder</a></td> <td>A query builder</td></tr></tbody></table> <h5 id="examples-2"><a href="#examples-2" class="header-anchor">#</a> Examples</h5> <p>Fetch all items related to an item through a relation:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> pets <span class="token operator">=</span> <span class="token keyword">await</span> jennifer<span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'jennifer has'</span><span class="token punctuation">,</span> pets<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token string">'pets'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The related query is just like any other query. All knex and objection query builder methods are available:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dogsAndCats <span class="token operator">=</span> <span class="token keyword">await</span> jennifer
  <span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'animals.*'</span><span class="token punctuation">,</span> <span class="token string">'persons.name as ownerName'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'species'</span><span class="token punctuation">,</span> <span class="token string">'='</span><span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">orWhere</span><span class="token punctuation">(</span><span class="token string">'breed'</span><span class="token punctuation">,</span> <span class="token string">'='</span><span class="token punctuation">,</span> <span class="token string">'cat'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">innerJoin</span><span class="token punctuation">(</span><span class="token string">'persons'</span><span class="token punctuation">,</span> <span class="token string">'persons.id'</span><span class="token punctuation">,</span> <span class="token string">'animals.ownerId'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">'animals.name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// All the dogs and cats have the owner's name &quot;Jennifer&quot;</span>
<span class="token comment">// joined as the `ownerName` property.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dogsAndCats<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This inserts a new item to the database and binds it to the owner item as defined by the relation (by default):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> waldo <span class="token operator">=</span> <span class="token keyword">await</span> jennifer
  <span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">species</span><span class="token operator">:</span> <span class="token string">'dog'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Fluffy'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>waldo<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>To attach an existing item to a relation the <code>relate</code> method can be used. In this example the dog <code>fluffy</code> already exists in the database but it isn't related to <code>jennifer</code> through the <code>pets</code> relation. We can make the connection like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> jennifer<span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">relate</span><span class="token punctuation">(</span>fluffy<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fluffy is now related to jennifer through pets relation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The connection can be removed using the <code>unrelate</code> method. Again, this doesn't delete the related model. Only the connection is removed. For example in the case of ManyToMany relation the join table entries are deleted.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> jennifer
  <span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">unrelate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> fluffy<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'jennifer no longer has fluffy as a pet'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Related items can be deleted using the delete method. Note that in the case of ManyToManyRelation the join table entries are not deleted. You should use <code>ON DELETE CASCADE</code> in your database migrations to make the database properly delete the join table rows when either end of the relation is deleted. Naturally the delete query can be chained with any query building methods.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> jennifer
  <span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'species'</span><span class="token punctuation">,</span> <span class="token string">'cat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'jennifer no longer has any cats'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>update</code> and <code>patch</code> can be used to update related models. Only difference between the mentioned methods is that <code>update</code> validates the input objects using the related model class's full schema and <code>patch</code> ignores the <code>required</code> property of the schema. Use <code>update</code> when you want to update <em>all</em> properties of a model and <code>patch</code> when only a subset should be updated.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> updatedFluffy <span class="token operator">=</span> <span class="token keyword">await</span> jennifer
  <span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">species</span><span class="token operator">:</span> <span class="token string">'dog'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Fluffy the great'</span><span class="token punctuation">,</span> <span class="token literal-property property">vaccinated</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> fluffy<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fluffy's new name is&quot;</span><span class="token punctuation">,</span> updatedFluffy<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This query will be rejected assuming that `name` or `species`</span>
<span class="token comment">// is a required property for an Animal.</span>
<span class="token keyword">await</span> jennifer
  <span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">vaccinated</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'species'</span><span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This query will succeed.</span>
<span class="token keyword">await</span> jennifer
  <span class="token punctuation">.</span><span class="token function">$relatedQuery</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">vaccinated</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'species'</span><span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'jennifer just got all her dogs vaccinated'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="beforeinsert"><a href="#beforeinsert" class="header-anchor">#</a> $beforeInsert()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$beforeInsert</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$beforeInsert</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPossiblyAsyncStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Called before a model is inserted into the database.</p> <p>You can return a promise from this function if you need to do asynchronous stuff. You can also throw an exception to abort the insert and reject the query. This can be useful if you need to do insert specific validation.</p> <p>If you start a query from this hook, make sure you specify <code>queryContext.transaction</code> as it's connection to make sure the query takes part in the same transaction as the parent query. See the example below.</p> <h5 id="arguments-3"><a href="#arguments-3" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>queryContext</td> <td>Object</td> <td>The context object of the insert query. See <a href="/objection.js/api/query-builder/other-methods.html#context">context</a>.</td></tr></tbody></table> <h5 id="return-value-3"><a href="#return-value-3" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="http://bluebirdjs.com/docs/getting-started.html" target="_blank" rel="noopener noreferrer">Promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>void</td> <td>Promise or void depending whether your hook is async or not.</td></tr></tbody></table> <h5 id="examples-3"><a href="#examples-3" class="header-anchor">#</a> Examples</h5> <p>The current query's transaction/knex instance can always be accessed through <code>queryContext.transaction</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$beforeInsert</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$beforeInsert</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// This can always be done even if there is no running</span>
    <span class="token comment">// transaction. In that case `queryContext.transaction`</span>
    <span class="token comment">// returns the normal knex instance. This makes sure that</span>
    <span class="token comment">// the query is not executed outside the original query's</span>
    <span class="token comment">// transaction.</span>
    <span class="token keyword">await</span> SomeModel<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">.</span>transaction<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>whatever<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="afterinsert"><a href="#afterinsert" class="header-anchor">#</a> $afterInsert()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$afterInsert</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$afterInsert</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPossiblyAsyncStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Called after a model has been inserted into the database.</p> <p>You can return a promise from this function if you need to do asynchronous stuff.</p> <h5 id="arguments-4"><a href="#arguments-4" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>queryContext</td> <td>Object</td> <td>The context object of the insert query. See <a href="/objection.js/api/query-builder/other-methods.html#context">context</a>.</td></tr></tbody></table> <h5 id="return-value-4"><a href="#return-value-4" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="http://bluebirdjs.com/docs/getting-started.html" target="_blank" rel="noopener noreferrer">Promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>void</td> <td>Promise or void depending whether your hook is async or not.</td></tr></tbody></table> <h5 id="examples-4"><a href="#examples-4" class="header-anchor">#</a> Examples</h5> <p>The current query's transaction/knex instance can always be accessed through <code>queryContext.transaction</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$afterInsert</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$afterInsert</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// This can always be done even if there is no running transaction. In that</span>
    <span class="token comment">// case `queryContext.transaction` returns the normal knex instance. This</span>
    <span class="token comment">// makes sure that the query is not executed outside the original query's</span>
    <span class="token comment">// transaction.</span>
    <span class="token keyword">await</span> SomeModel<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">.</span>transaction<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>whatever<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="beforeupdate"><a href="#beforeupdate" class="header-anchor">#</a> $beforeUpdate()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$beforeUpdate</span><span class="token punctuation">(</span><span class="token parameter">opt<span class="token punctuation">,</span> queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$beforeUpdate</span><span class="token punctuation">(</span>opt<span class="token punctuation">,</span> queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPossiblyAsyncStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Called before a model instance is updated.</p> <p>You can return a promise from this function if you need to do asynchronous stuff. You can also throw an exception to abort the update and reject the query. This can be useful if
you need to do update specific validation.</p> <p>This method is also called before a model is patched. Therefore all the model's properties may not exist. You can check if the update operation is a patch by checking the <code>opt.patch</code> boolean.</p> <p>Inside the hook, <code>this</code> contains the values to be updated. If (and only if) the query is started for an existing model instance using <a href="/objection.js/api/model/instance-methods.html#query">$query</a>, <code>opt.old</code> object contains the old values. The old values are never fetched from the database implicitly. For non-instance queries the <code>opt.old</code> object is <code>undefined</code>. See the examples.</p> <h5 id="arguments-5"><a href="#arguments-5" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>opt</td> <td><a href="/objection.js/api/types/#type-modeloptions">ModelOptions</a></td> <td>Update options.</td></tr> <tr><td>queryContext</td> <td>Object</td> <td>The context object of the update query. See <a href="/objection.js/api/query-builder/other-methods.html#context">context</a>.</td></tr></tbody></table> <h5 id="return-value-5"><a href="#return-value-5" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="http://bluebirdjs.com/docs/getting-started.html" target="_blank" rel="noopener noreferrer">Promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>void</td> <td>Promise or void depending whether your hook is async or not.</td></tr></tbody></table> <h5 id="examples-5"><a href="#examples-5" class="header-anchor">#</a> Examples</h5> <p>The current query's transaction/knex instance can always be accessed through <code>queryContext.transaction</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$beforeUpdate</span><span class="token punctuation">(</span><span class="token parameter">opt<span class="token punctuation">,</span> queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$beforeUpdate</span><span class="token punctuation">(</span>opt<span class="token punctuation">,</span> queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// This can always be done even if there is no running transaction.</span>
    <span class="token comment">// In that case `queryContext.transaction` returns the normal knex</span>
    <span class="token comment">// instance. This makes sure that the query is not executed outside</span>
    <span class="token comment">// the original query's transaction.</span>
    <span class="token keyword">await</span> SomeModel<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">.</span>transaction<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>whatever<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note that the <code>opt.old</code> object is only populated for instance queries started with <code>$query</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>somePerson<span class="token punctuation">.</span><span class="token function">$query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>newValues<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For the following query <code>opt.old</code> is <code>undefined</code> because there is no old object in the JavaScript side. objection.js doesn't fetch the old values even if they existed in the database
for performance and simplicity reasons.</p> <div class="language-js extra-class"><pre class="language-js"><code>Person<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>newValues<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="afterupdate"><a href="#afterupdate" class="header-anchor">#</a> $afterUpdate()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$afterUpdate</span><span class="token punctuation">(</span><span class="token parameter">opt<span class="token punctuation">,</span> queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$afterUpdate</span><span class="token punctuation">(</span>opt<span class="token punctuation">,</span> queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPossiblyAsyncStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Called after a model instance is updated.</p> <p>You can return a promise from this function if you need to do asynchronous stuff.</p> <p>This method is also called after a model is patched. Therefore all the model's properties may not exist. You can check if the update operation is a patch by checking the <code>opt.patch</code> boolean.</p> <p>Inside the hook, <code>this</code> contains the values to be updated. If (and only if) the query is started for an existing model instance using <a href="/objection.js/api/model/instance-methods.html#query">$query</a>, <code>opt.old</code> object contains the old values. The old values are never fetched from the database implicitly. For non-instance queries the <code>opt.old</code> object is <code>undefined</code>. See the examples.</p> <h5 id="arguments-6"><a href="#arguments-6" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>opt</td> <td><a href="/objection.js/api/types/#type-modeloptions">ModelOptions</a></td> <td>Update options.</td></tr> <tr><td>queryContext</td> <td>Object</td> <td>The context object of the update query. See <a href="/objection.js/api/query-builder/other-methods.html#context">context</a>.</td></tr></tbody></table> <h5 id="return-value-6"><a href="#return-value-6" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="http://bluebirdjs.com/docs/getting-started.html" target="_blank" rel="noopener noreferrer">Promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>void</td> <td>Promise or void depending whether your hook is async or not.</td></tr></tbody></table> <h5 id="examples-6"><a href="#examples-6" class="header-anchor">#</a> Examples</h5> <p>The current query's transaction/knex instance can always be accessed through <code>queryContext.transaction</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$afterUpdate</span><span class="token punctuation">(</span><span class="token parameter">opt<span class="token punctuation">,</span> queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$afterUpdate</span><span class="token punctuation">(</span>opt<span class="token punctuation">,</span> queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// This can always be done even if there is no running transaction.</span>
    <span class="token comment">// In that case `queryContext.transaction` returns the normal knex</span>
    <span class="token comment">// instance. This makes sure that the query is not executed</span>
    <span class="token comment">// outside the original query's transaction.</span>
    <span class="token keyword">await</span> SomeModel<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">.</span>transaction<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>whatever<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note that the <code>opt.old</code> object is only populated for instance queries started with <code>$query</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code>somePerson<span class="token punctuation">.</span><span class="token function">$query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>newValues<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For the following query <code>opt.old</code> is <code>undefined</code> because there is no old object in the JavaScript side. objection.js doesn't fetch the old values even if they existed in the database for performance and simplicity reasons.</p> <div class="language-js extra-class"><pre class="language-js"><code>Person<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>newValues<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="beforedelete"><a href="#beforedelete" class="header-anchor">#</a> $beforeDelete()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$beforeDelete</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$beforeDelete</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">doPossiblyAsyncStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Called before a model is deleted.</p> <p>You can return a promise from this function if you need to do asynchronous stuff.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This method is only called for instance deletes started with <a href="/objection.js/api/model/instance-methods.html#query">$query()</a> method. All hooks are instance methods. For deletes there is no instance for which to call the hook, except when <a href="/objection.js/api/model/instance-methods.html#query">$query()</a> is used. Objection doesn't fetch the item just to call the hook for it to ensure predictable performance and prevent a whole class of concurrency bugs.</p></div> <h5 id="arguments-7"><a href="#arguments-7" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>queryContext</td> <td>Object</td> <td>The context object of the update query. See <a href="/objection.js/api/query-builder/other-methods.html#context">context</a>.</td></tr></tbody></table> <h5 id="return-value-7"><a href="#return-value-7" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="http://bluebirdjs.com/docs/getting-started.html" target="_blank" rel="noopener noreferrer">Promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>void</td> <td>Promise or void depending whether your hook is async or not.</td></tr></tbody></table> <h5 id="examples-7"><a href="#examples-7" class="header-anchor">#</a> Examples</h5> <p>The current query's transaction/knex instance can always be accessed through <code>queryContext.transaction</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$beforeDelete</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$beforeDelete</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// This can always be done even if there is no running transaction.</span>
    <span class="token comment">// In that case `queryContext.transaction` returns the normal knex</span>
    <span class="token comment">// instance. This makes sure that the query is not executed outside</span>
    <span class="token comment">// the original query's transaction.</span>
    <span class="token keyword">await</span> SomeModel<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">.</span>transaction<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>whatever<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="afterdelete"><a href="#afterdelete" class="header-anchor">#</a> $afterDelete()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$afterDelete</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$afterDelete</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPossiblyAsyncStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Called after a model is deleted.</p> <p>You can return a promise from this function if you need to do asynchronous stuff.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This method is only called for instance deletes started with <a href="/objection.js/api/model/instance-methods.html#query">$query()</a> method. All hooks are instance methods. For deletes there is no instance for which to call the hook, except when <a href="/objection.js/api/model/instance-methods.html#query">$query()</a> is used. Objection doesn't fetch the item just to call the hook for it to ensure predictable performance and prevent a whole class of concurrency bugs.</p></div> <h5 id="arguments-8"><a href="#arguments-8" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>queryContext</td> <td>Object</td> <td>The context object of the update query. See <a href="/objection.js/api/query-builder/other-methods.html#context">context</a>.</td></tr></tbody></table> <h5 id="return-value-8"><a href="#return-value-8" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="http://bluebirdjs.com/docs/getting-started.html" target="_blank" rel="noopener noreferrer">Promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>void</td> <td>Promise or void depending whether your hook is async or not.</td></tr></tbody></table> <h5 id="examples-8"><a href="#examples-8" class="header-anchor">#</a> Examples</h5> <p>The current query's transaction/knex instance can always be accessed through <code>queryContext.transaction</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">$afterDelete</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$afterDelete</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// This can always be done even if there is no running transaction. In that</span>
    <span class="token comment">// case `queryContext.transaction` returns the normal knex instance. This</span>
    <span class="token comment">// makes sure that the query is not executed outside the original query's</span>
    <span class="token comment">// transaction.</span>
    <span class="token keyword">await</span> SomeModel<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">.</span>transaction<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>whatever<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="afterfind"><a href="#afterfind" class="header-anchor">#</a> $afterFind()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token function">$afterFind</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">doPossiblyAsyncStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Called after a model is fetched.</p> <p>This method is <em>not</em> called for insert, update or delete operations.</p> <p>You can return a promise from this function if you need to do asynchronous stuff.</p> <h5 id="arguments-9"><a href="#arguments-9" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>queryContext</td> <td>Object</td> <td>The context object of the update query. See <a href="/objection.js/api/query-builder/other-methods.html#context">context</a>.</td></tr></tbody></table> <h5 id="return-value-9"><a href="#return-value-9" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="http://bluebirdjs.com/docs/getting-started.html" target="_blank" rel="noopener noreferrer">Promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>void</td> <td>Promise or void depending whether your hook is async or not.</td></tr></tbody></table> <h5 id="examples-9"><a href="#examples-9" class="header-anchor">#</a> Examples</h5> <p>The current query's transaction/knex instance can always be accessed through <code>queryContext.transaction</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token function">$afterFind</span><span class="token punctuation">(</span><span class="token parameter">queryContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// This can always be done even if there is no running transaction.</span>
    <span class="token comment">// In that case `queryContext.transaction` returns the normal knex</span>
    <span class="token comment">// instance. This makes sure that the query is not executed outside</span>
    <span class="token comment">// the original query's transaction.</span>
    <span class="token keyword">return</span> SomeModel<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>queryContext<span class="token punctuation">.</span>transaction<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>whatever<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="clone"><a href="#clone" class="header-anchor">#</a> $clone()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> clone <span class="token operator">=</span> modelInstance<span class="token punctuation">.</span><span class="token function">$clone</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Returns a (deep) copy of a model instance.</p> <p>If the item to be cloned has instances of <a href="/objection.js/api/model/" class="router-link-active">Model</a> as properties (or arrays of them) they are cloned using their <code>$clone()</code> method. A shallow copy without relations can be created by passing the <code>shallow: true</code> option.</p> <h5 id="arguments-10"><a href="#arguments-10" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>opt</td> <td><a href="/objection.js/api/types/#type-cloneoptions">CloneOptions</a></td> <td>Optional options</td></tr></tbody></table> <h5 id="return-value-10"><a href="#return-value-10" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/model/" class="router-link-active">Model</a></td> <td>Deep clone of <code>this</code></td></tr></tbody></table> <h5 id="examples-10"><a href="#examples-10" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> shallowClone <span class="token operator">=</span> modelInstance<span class="token punctuation">.</span><span class="token function">$clone</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">shallow</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="tojson"><a href="#tojson" class="header-anchor">#</a> toJSON()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> jsonObj <span class="token operator">=</span> modelInstance<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Exports this model as a JSON object.</p> <p>See <a href="/objection.js/api/model/overview.html#model-data-lifecycle">this section</a> for more information.</p> <h5 id="arguments-11"><a href="#arguments-11" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>opt</td> <td><a href="/objection.js/api/types/#type-tojsonoptions">ToJsonOptions</a></td> <td>Optional options</td></tr></tbody></table> <h5 id="return-value-11"><a href="#return-value-11" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>Object</td> <td>Model as a JSON object.</td></tr></tbody></table> <h5 id="examples-11"><a href="#examples-11" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> shallowObj <span class="token operator">=</span> modelInstance<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">shallow</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">virtuals</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> onlySomeVirtuals <span class="token operator">=</span> modelInstance<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">virtuals</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'fullName'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="tojson-2"><a href="#tojson-2" class="header-anchor">#</a> $toJson()</h2> <p>Alias for <a href="/objection.js/api/model/instance-methods.html#tojson">toJSON</a></p> <h2 id="todatabasejson"><a href="#todatabasejson" class="header-anchor">#</a> $toDatabaseJson()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> row <span class="token operator">=</span> modelInstance<span class="token punctuation">.</span><span class="token function">$toDatabaseJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Exports this model as a database JSON object.</p> <p>This method is called internally to convert a model into a database row.</p> <p>See <a href="/objection.js/api/model/overview.html#model-data-lifecycle">this section</a> for more information.</p> <h5 id="return-value-12"><a href="#return-value-12" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>Object</td> <td>Database row.</td></tr></tbody></table> <h2 id="parsedatabasejson"><a href="#parsedatabasejson" class="header-anchor">#</a> $parseDatabaseJson()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token function">$parseDatabaseJson</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Remember to call the super class's implementation.</span>
    json <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$parseDatabaseJson</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Do your conversion here.</span>
    <span class="token keyword">return</span> json<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is called when a <a href="/objection.js/api/model/" class="router-link-active">Model</a> instance is created from a database JSON object. This method converts the JSON object from the database format to the internal format.</p> <p>You can override this method to carry out whatever conversions you want for the data when it's fetched from the database, before it's converted into a model instance. See <a href="/objection.js/api/model/overview.html#model-data-lifecycle">this section</a> for more information.</p> <p>There are a couple of requirements for the implementation:</p> <ol><li><p>This function must be pure. It shouldn't have any side effects because it is called from &quot;unexpected&quot; places (for example to determine if your model somehow transforms column names between db and code).</p></li> <li><p>This function must be able to handle any subset of the model's properties coming in.You cannot assume that some column is present in the <code>json</code> object as it depends on the select statement. There can also be additional columns because of joins, aliases etc. This method must also be prepared for null values in <em>any</em> property of the <code>json</code> object.</p></li></ol> <h5 id="arguments-12"><a href="#arguments-12" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>json</td> <td>Object</td> <td>The JSON POJO in database format</td></tr></tbody></table> <h5 id="return-value-13"><a href="#return-value-13" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>Object</td> <td>The JSON POJO in internal format</td></tr></tbody></table> <h2 id="formatdatabasejson"><a href="#formatdatabasejson" class="header-anchor">#</a> $formatDatabaseJson()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token function">$formatDatabaseJson</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Remember to call the super class's implementation.</span>
    json <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$formatDatabaseJson</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Do your conversion here.</span>
    <span class="token keyword">return</span> json<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is called when a <a href="/objection.js/api/model/" class="router-link-active">Model</a> is converted to database format.</p> <p>You can override this method to carry out whatever conversions you want for the data when it's being sent to the database driver. See <a href="/objection.js/api/model/overview.html#model-data-lifecycle">this section</a> for more information.</p> <p>There are a couple of requirements for the implementation:</p> <ol><li><p>This function must be pure. It shouldn't have any side effects because it is called from &quot;unexpected&quot; places (for example to determine if your model somehow transforms column names between db and code).</p></li> <li><p>This function must be able to handle any subset of the model's properties coming in. You cannot assume that some property is present in the <code>json</code> object. There can also be additional properties. This method must also be prepared for null values in <em>any</em> property of the <code>json</code> object.</p></li></ol> <h5 id="arguments-13"><a href="#arguments-13" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>json</td> <td>Object</td> <td>The JSON POJO in internal format</td></tr></tbody></table> <h5 id="return-value-14"><a href="#return-value-14" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>Object</td> <td>The JSON POJO in database format</td></tr></tbody></table> <h2 id="parsejson"><a href="#parsejson" class="header-anchor">#</a> $parseJson()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token function">$parseJson</span><span class="token punctuation">(</span><span class="token parameter">json<span class="token punctuation">,</span> opt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Remember to call the super class's implementation.</span>
    json <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$parseJson</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Do your conversion here.</span>
    <span class="token keyword">return</span> json<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is called when a <a href="/objection.js/api/model/" class="router-link-active">Model</a> is created from a JSON object. Converts the JSON object from the external format to the internal format.</p> <p>You can override this method to carry out whatever conversions you want for the data when a model instance is being created from external data. See <a href="/objection.js/api/model/overview.html#model-data-lifecycle">this section</a> for more information.</p> <p>There are a couple of requirements for the implementation:</p> <ol><li><p>This function must be pure. It shouldn't have any side effects because it is called from &quot;unexpected&quot; places (for example to determine if your model somehow transforms column names between db and code).</p></li> <li><p>This function must be able to handle any subset of the model's properties coming in. You cannot assume that some property is present in the <code>json</code> object. There can also be additional properties. This method must also be prepared for null values in <em>any</em> property of the <code>json</code> object.</p></li></ol> <h5 id="arguments-14"><a href="#arguments-14" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>json</td> <td>Object</td> <td>The JSON POJO in external format</td></tr> <tr><td>opt</td> <td><a href="/objection.js/api/types/#type-modeloptions">ModelOptions</a></td> <td>Optional options</td></tr></tbody></table> <h5 id="return-value-15"><a href="#return-value-15" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>Object</td> <td>The JSON POJO in internal format</td></tr></tbody></table> <h2 id="formatjson"><a href="#formatjson" class="header-anchor">#</a> $formatJson()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token function">$formatJson</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Remember to call the super class's implementation.</span>
    json <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">$formatJson</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Do your conversion here.</span>
    <span class="token keyword">return</span> json<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is called when a <a href="/objection.js/api/model/" class="router-link-active">Model</a> is converted to JSON. Converts the JSON object from the internal format to the external format.</p> <p>You can override this method to carry out whatever conversions you want for the data when a model instance is being converted into external representation. See <a href="/objection.js/api/model/overview.html#model-data-lifecycle">this section</a> for more information.</p> <p>There are a couple of requirements for the implementation:</p> <ol><li><p>This function must be pure. It shouldn't have any side effects because it is called from &quot;unexpected&quot; places (for example to determine if your model somehow transforms column names between db and code).</p></li> <li><p>This function must be able to handle any subset of the model's properties coming in. You cannot assume that some column is present in the <code>json</code> object as it depends on the select statement. There can also be additional columns because of joins, aliases etc. This method must also be prepared for null values in <em>any</em> property of the <code>json</code> object.</p></li></ol> <h5 id="arguments-15"><a href="#arguments-15" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>json</td> <td>Object</td> <td>The JSON POJO in internal format</td></tr></tbody></table> <h5 id="return-value-16"><a href="#return-value-16" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>Object</td> <td>The JSON POJO in external format</td></tr></tbody></table> <h2 id="setjson"><a href="#setjson" class="header-anchor">#</a> $setJson()</h2> <div class="language-js extra-class"><pre class="language-js"><code>modelInstance<span class="token punctuation">.</span><span class="token function">$setJson</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Sets the values from a JSON object.</p> <p>Validates the JSON before setting values.</p> <h5 id="arguments-16"><a href="#arguments-16" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>json</td> <td>Object</td> <td>The JSON POJO to set</td></tr> <tr><td>opt</td> <td><a href="/objection.js/api/types/#type-modeloptions">ModelOptions</a></td> <td>Optional options</td></tr></tbody></table> <h5 id="return-value-17"><a href="#return-value-17" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/model/" class="router-link-active">Model</a></td> <td><code>this</code> for chaining</td></tr></tbody></table> <h2 id="setdatabasejson"><a href="#setdatabasejson" class="header-anchor">#</a> $setDatabaseJson()</h2> <div class="language-js extra-class"><pre class="language-js"><code>modelInstance<span class="token punctuation">.</span><span class="token function">$setDatabaseJson</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Sets the values from a JSON object in database format.</p> <h5 id="arguments-17"><a href="#arguments-17" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>json</td> <td>Object</td> <td>The JSON POJO in database format</td></tr></tbody></table> <h5 id="return-value-18"><a href="#return-value-18" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/model/" class="router-link-active">Model</a></td> <td><code>this</code> for chaining</td></tr></tbody></table> <h2 id="set"><a href="#set" class="header-anchor">#</a> $set()</h2> <div class="language-js extra-class"><pre class="language-js"><code>modelInstance<span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Sets the values from another model instance or object.</p> <p>Unlike <a href="/objection.js/api/model/instance-methods.html#setjson">$setJson</a>, this doesn't call any <a href="/objection.js/api/model/instance-methods.html#parsejson">$parseJson</a> hooks or validate the input. This simply sets each value in the object to this object.</p> <h5 id="arguments-18"><a href="#arguments-18" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>obj</td> <td>Object</td> <td>The values to set</td></tr></tbody></table> <h5 id="return-value-19"><a href="#return-value-19" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/model/" class="router-link-active">Model</a></td> <td><code>this</code> for chaining</td></tr></tbody></table> <h2 id="setrelated"><a href="#setrelated" class="header-anchor">#</a> $setRelated()</h2> <div class="language-js extra-class"><pre class="language-js"><code>modelInstance<span class="token punctuation">.</span><span class="token function">$setRelated</span><span class="token punctuation">(</span>relation<span class="token punctuation">,</span> relatedModels<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Sets related models to a corresponding property in the object.</p> <h5 id="arguments-19"><a href="#arguments-19" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>relation</td> <td>string|<a href="/objection.js/api/types/#class-relation">Relation</a></td> <td>Relation name or a relation instance to set.</td></tr> <tr><td>relatedModels</td> <td><a href="/objection.js/api/model/" class="router-link-active">Model</a>|<a href="/objection.js/api/model/" class="router-link-active">Model</a>[]</td> <td>Models to set.</td></tr></tbody></table> <h5 id="return-value-20"><a href="#return-value-20" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/model/" class="router-link-active">Model</a></td> <td><code>this</code> for chaining</td></tr></tbody></table> <h5 id="examples-12"><a href="#examples-12" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code>person<span class="token punctuation">.</span><span class="token function">$setRelated</span><span class="token punctuation">(</span><span class="token string">'parent'</span><span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>person<span class="token punctuation">.</span><span class="token function">$setRelated</span><span class="token punctuation">(</span><span class="token string">'children'</span><span class="token punctuation">,</span> children<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="appendrelated"><a href="#appendrelated" class="header-anchor">#</a> $appendRelated()</h2> <div class="language-js extra-class"><pre class="language-js"><code>modelInstance<span class="token punctuation">.</span><span class="token function">$appendRelated</span><span class="token punctuation">(</span>relation<span class="token punctuation">,</span> relatedModels<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Appends related models to a corresponding property in the object.</p> <h5 id="arguments-20"><a href="#arguments-20" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>relation</td> <td>string|<a href="/objection.js/api/types/#class-relation">Relation</a></td> <td>Relation name or a relation instance to append to.</td></tr> <tr><td>relatedModels</td> <td><a href="/objection.js/api/model/" class="router-link-active">Model</a>|<a href="/objection.js/api/model/" class="router-link-active">Model</a>[]</td> <td>Models to append.</td></tr></tbody></table> <h5 id="return-value-21"><a href="#return-value-21" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/model/" class="router-link-active">Model</a></td> <td><code>this</code> for chaining</td></tr></tbody></table> <h5 id="examples-13"><a href="#examples-13" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code>person<span class="token punctuation">.</span><span class="token function">$appendRelated</span><span class="token punctuation">(</span><span class="token string">'parent'</span><span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>person<span class="token punctuation">.</span><span class="token function">$appendRelated</span><span class="token punctuation">(</span><span class="token string">'children'</span><span class="token punctuation">,</span> child1<span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">$appendRelated</span><span class="token punctuation">(</span><span class="token string">'children'</span><span class="token punctuation">,</span> child2<span class="token punctuation">)</span><span class="token punctuation">;</span>

child1 <span class="token operator">=</span> person<span class="token punctuation">.</span>children<span class="token punctuation">[</span>person<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
child2 <span class="token operator">=</span> person<span class="token punctuation">.</span>children<span class="token punctuation">[</span>person<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="fetchgraph"><a href="#fetchgraph" class="header-anchor">#</a> $fetchGraph()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> builder <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">$fetchGraph</span><span class="token punctuation">(</span>expression<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Shortcut for <a href="/objection.js/api/model/static-methods.html#static-fetchgraph">Person.fetchGraph(person, options)</a></p> <h2 id="traverse"><a href="#traverse" class="header-anchor">#</a> $traverse()</h2> <div class="language-js extra-class"><pre class="language-js"><code>person<span class="token punctuation">.</span><span class="token function">$traverse</span><span class="token punctuation">(</span>filterConstructor<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Shortcut for <a href="/objection.js/api/model/static-methods.html#static-traverse">Model.traverse(filterConstructor, this, callback)</a>.</p> <h2 id="traverseasync"><a href="#traverseasync" class="header-anchor">#</a> $traverseAsync()</h2> <div class="language-js extra-class"><pre class="language-js"><code>person<span class="token punctuation">.</span><span class="token function">$traverseAsync</span><span class="token punctuation">(</span>filterConstructor<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Shortcut for <a href="/objection.js/api/model/static-methods.html#static-traverseasync">Model.traverseAsync(filterConstructor, this, callback)</a>.</p> <h2 id="knex"><a href="#knex" class="header-anchor">#</a> $knex()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> knex <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">$knex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Shortcut for <a href="/objection.js/api/model/static-methods.html#static-knex">Person.knex()</a>.</p> <h2 id="transaction"><a href="#transaction" class="header-anchor">#</a> $transaction()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> knex <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">$transaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Shortcut for <a href="/objection.js/api/model/static-methods.html#static-knex">Person.knex()</a>.</p> <h2 id="id"><a href="#id" class="header-anchor">#</a> $id()</h2> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">$id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -&gt; 100</span>
<span class="token comment">// Sets the id.</span>
model<span class="token punctuation">.</span><span class="token function">$id</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Returns or sets the identifier of a model instance.</p> <p>The identifier property does not have to be accessed or set using this method.</p> <p>If the identifier property is known it can be accessed or set just like any other property. You don't need to use this method to set the identifier. This method is mainly helpful when building plugins and other tools on top of objection.</p> <h5 id="examples-14"><a href="#examples-14" class="header-anchor">#</a> Examples</h5> <p>Composite key</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span><span class="token function">$id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -&gt; [100, 20, 30]</span>
<span class="token comment">// Sets the id.</span>
model<span class="token punctuation">.</span><span class="token function">$id</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="beforevalidate"><a href="#beforevalidate" class="header-anchor">#</a> $beforeValidate()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token function">$beforeValidate</span><span class="token punctuation">(</span><span class="token parameter">jsonSchema<span class="token punctuation">,</span> json<span class="token punctuation">,</span> opt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> jsonSchema<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is called before validation.</p> <p>You can add any additional validation to this method. If validation fails, simply throw an exception and the query will be rejected. If you modify the <code>jsonSchema</code> argument and return it, that one will be used to validate the model.</p> <p><code>opt.old</code> object contains the old values while <code>json</code> contains the new values if validation is being done for an existing object.</p> <h5 id="arguments-21"><a href="#arguments-21" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>jsonSchema</td> <td>Object</td> <td>A deep clone of this class's jsonSchema</td></tr> <tr><td>json</td> <td>Object</td> <td>The JSON object to be validated</td></tr> <tr><td>opt</td> <td><a href="/objection.js/api/types/#type-modeloptions">ModelOptions</a></td> <td>Optional options</td></tr></tbody></table> <h5 id="return-value-22"><a href="#return-value-22" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>Object</td> <td>The modified jsonSchema or the input jsonSchema.</td></tr></tbody></table> <h2 id="aftervalidate"><a href="#aftervalidate" class="header-anchor">#</a> $afterValidate()</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token function">$afterValidate</span><span class="token punctuation">(</span><span class="token parameter">json<span class="token punctuation">,</span> opt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is called after successful validation.</p> <p>You can do further validation here and throw an error if something goes wrong.</p> <p><code>opt.old</code> object contains the old values while <code>json</code> contains the new values if validation is being done for an existing object.</p> <h5 id="arguments-22"><a href="#arguments-22" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>json</td> <td>Object</td> <td>The JSON object to be validated</td></tr> <tr><td>opt</td> <td><a href="/objection.js/api/types/#type-modeloptions">ModelOptions</a></td> <td>Optional options</td></tr></tbody></table> <h2 id="validate"><a href="#validate" class="header-anchor">#</a> $validate()</h2> <div class="language-js extra-class"><pre class="language-js"><code>modelInstance<span class="token punctuation">.</span><span class="token function">$validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Validates the model instance.</p> <p>Calls <a href="/objection.js/api/model/instance-methods.html#beforevalidate">$beforeValidate</a> and <a href="/objection.js/api/model/instance-methods.html#aftervalidate">$afterValidate</a> methods. This method is called automatically from <a href="/objection.js/api/model/static-methods.html#static-fromjson">fromJson</a> and <a href="/objection.js/api/model/instance-methods.html#setjson">$setJson</a> methods. This method can also be
called explicitly when needed.</p> <h5 id="throws"><a href="#throws" class="header-anchor">#</a> Throws</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/types/#class-validationerror">ValidationError</a></td> <td>If validation fails.</td></tr></tbody></table> <h2 id="omit"><a href="#omit" class="header-anchor">#</a> $omit()</h2> <div class="language-js extra-class"><pre class="language-js"><code>modelInstance<span class="token punctuation">.</span><span class="token function">$omit</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Omits a set of properties.</p> <h5 id="arguments-23"><a href="#arguments-23" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>keys</td> <td>string<br>string[]<br>Object&lt;string, boolean&gt;</td> <td>keys to omit</td></tr></tbody></table> <h5 id="return-value-23"><a href="#return-value-23" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/model/" class="router-link-active">Model</a></td> <td><code>this</code> for chaining</td></tr></tbody></table> <h5 id="examples-15"><a href="#examples-15" class="header-anchor">#</a> Examples</h5> <p>Omits a set of properties.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> json <span class="token operator">=</span> person
  <span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Jennifer'</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Lawrence'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">$omit</span><span class="token punctuation">(</span><span class="token string">'lastName'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token string">'lastName'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; false</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> json <span class="token operator">=</span> person
  <span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Jennifer'</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Lawrence'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">$omit</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'lastName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token string">'lastName'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; false</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> json <span class="token operator">=</span> person
  <span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Jennifer'</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Lawrence'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">$omit</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token string">'lastName'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; false</span>
</code></pre></div><h2 id="pick"><a href="#pick" class="header-anchor">#</a> $pick()</h2> <div class="language-js extra-class"><pre class="language-js"><code>modelInstance<span class="token punctuation">.</span><span class="token function">$pick</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Picks a set of properties.</p> <h5 id="arguments-24"><a href="#arguments-24" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Argument</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td>keys</td> <td>string<br>string[]<br>Object&lt;string, boolean&gt;</td> <td>keys to pick</td></tr></tbody></table> <h5 id="return-value-24"><a href="#return-value-24" class="header-anchor">#</a> Return value</h5> <table><thead><tr><th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="/objection.js/api/model/" class="router-link-active">Model</a></td> <td><code>this</code> for chaining</td></tr></tbody></table> <h5 id="examples-16"><a href="#examples-16" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> json <span class="token operator">=</span> person
  <span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Jennifer'</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Lawrence'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">$pick</span><span class="token punctuation">(</span><span class="token string">'firstName'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token string">'lastName'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; false</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> json <span class="token operator">=</span> person
  <span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Jennifer'</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Lawrence'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">$pick</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'firstName'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token string">'lastName'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; false</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> json <span class="token operator">=</span> person
  <span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">'Jennifer'</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'Lawrence'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">$pick</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token string">'lastName'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// --&gt; false</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/objection.js/api/model/static-methods.html" class="prev">
        Static Methods
      </a></span> <span class="next"><a href="/objection.js/api/model/instance-properties.html">
        Instance Properties
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/objection.js/assets/js/app.51116b66.js" defer></script><script src="/objection.js/assets/js/2.95f20b73.js" defer></script><script src="/objection.js/assets/js/1.317fd1a4.js" defer></script><script src="/objection.js/assets/js/29.ba4de844.js" defer></script>
  </body>
</html>
