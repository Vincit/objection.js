<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>module objection | Objection.js</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="An SQL friendly ORM for node.js">
    
    <link rel="preload" href="/objection.js/assets/css/0.styles.3da53256.css" as="style"><link rel="preload" href="/objection.js/assets/js/app.51116b66.js" as="script"><link rel="preload" href="/objection.js/assets/js/2.95f20b73.js" as="script"><link rel="preload" href="/objection.js/assets/js/1.317fd1a4.js" as="script"><link rel="preload" href="/objection.js/assets/js/34.aebcecdc.js" as="script"><link rel="prefetch" href="/objection.js/assets/js/10.035340d9.js"><link rel="prefetch" href="/objection.js/assets/js/11.39c398b3.js"><link rel="prefetch" href="/objection.js/assets/js/14.bb8bba7c.js"><link rel="prefetch" href="/objection.js/assets/js/15.bc71fa15.js"><link rel="prefetch" href="/objection.js/assets/js/16.1015d7dd.js"><link rel="prefetch" href="/objection.js/assets/js/17.ab0dd903.js"><link rel="prefetch" href="/objection.js/assets/js/18.a3b06a8a.js"><link rel="prefetch" href="/objection.js/assets/js/19.5c3531e2.js"><link rel="prefetch" href="/objection.js/assets/js/20.2af5813f.js"><link rel="prefetch" href="/objection.js/assets/js/21.6a6c2510.js"><link rel="prefetch" href="/objection.js/assets/js/22.eee14584.js"><link rel="prefetch" href="/objection.js/assets/js/23.6778d240.js"><link rel="prefetch" href="/objection.js/assets/js/24.c29fb8d5.js"><link rel="prefetch" href="/objection.js/assets/js/25.b88ad4e1.js"><link rel="prefetch" href="/objection.js/assets/js/26.9731c624.js"><link rel="prefetch" href="/objection.js/assets/js/27.c17291dd.js"><link rel="prefetch" href="/objection.js/assets/js/28.9cd4116c.js"><link rel="prefetch" href="/objection.js/assets/js/29.ba4de844.js"><link rel="prefetch" href="/objection.js/assets/js/3.67dbd821.js"><link rel="prefetch" href="/objection.js/assets/js/30.a4bb6cf5.js"><link rel="prefetch" href="/objection.js/assets/js/31.8e063863.js"><link rel="prefetch" href="/objection.js/assets/js/32.969a651e.js"><link rel="prefetch" href="/objection.js/assets/js/33.52185d77.js"><link rel="prefetch" href="/objection.js/assets/js/35.dc337a3b.js"><link rel="prefetch" href="/objection.js/assets/js/36.ca21b774.js"><link rel="prefetch" href="/objection.js/assets/js/37.02267c3f.js"><link rel="prefetch" href="/objection.js/assets/js/38.85569788.js"><link rel="prefetch" href="/objection.js/assets/js/39.d9a248b2.js"><link rel="prefetch" href="/objection.js/assets/js/4.45d2dbd6.js"><link rel="prefetch" href="/objection.js/assets/js/40.27397661.js"><link rel="prefetch" href="/objection.js/assets/js/41.223cb4e0.js"><link rel="prefetch" href="/objection.js/assets/js/42.2e35f594.js"><link rel="prefetch" href="/objection.js/assets/js/43.41db43f9.js"><link rel="prefetch" href="/objection.js/assets/js/44.254e7ab0.js"><link rel="prefetch" href="/objection.js/assets/js/45.7ac878fb.js"><link rel="prefetch" href="/objection.js/assets/js/46.7926c441.js"><link rel="prefetch" href="/objection.js/assets/js/47.39b80d10.js"><link rel="prefetch" href="/objection.js/assets/js/48.b564dbac.js"><link rel="prefetch" href="/objection.js/assets/js/49.a31c4e2f.js"><link rel="prefetch" href="/objection.js/assets/js/5.4784c48b.js"><link rel="prefetch" href="/objection.js/assets/js/50.e7cbb678.js"><link rel="prefetch" href="/objection.js/assets/js/51.fb64ca09.js"><link rel="prefetch" href="/objection.js/assets/js/52.8f1c164a.js"><link rel="prefetch" href="/objection.js/assets/js/53.f3efca5d.js"><link rel="prefetch" href="/objection.js/assets/js/54.bc53d728.js"><link rel="prefetch" href="/objection.js/assets/js/55.8659ee58.js"><link rel="prefetch" href="/objection.js/assets/js/56.3cec4251.js"><link rel="prefetch" href="/objection.js/assets/js/57.dd68f0ab.js"><link rel="prefetch" href="/objection.js/assets/js/58.f88cec37.js"><link rel="prefetch" href="/objection.js/assets/js/59.9a4f4852.js"><link rel="prefetch" href="/objection.js/assets/js/6.d162f3c7.js"><link rel="prefetch" href="/objection.js/assets/js/60.b0b2da17.js"><link rel="prefetch" href="/objection.js/assets/js/61.0d93e8f8.js"><link rel="prefetch" href="/objection.js/assets/js/62.2f6a782f.js"><link rel="prefetch" href="/objection.js/assets/js/63.7f748604.js"><link rel="prefetch" href="/objection.js/assets/js/64.bb75ecbf.js"><link rel="prefetch" href="/objection.js/assets/js/65.78122383.js"><link rel="prefetch" href="/objection.js/assets/js/66.b153c1ca.js"><link rel="prefetch" href="/objection.js/assets/js/67.092d4125.js"><link rel="prefetch" href="/objection.js/assets/js/68.84a4f227.js"><link rel="prefetch" href="/objection.js/assets/js/69.1be647c6.js"><link rel="prefetch" href="/objection.js/assets/js/7.a905ae32.js"><link rel="prefetch" href="/objection.js/assets/js/70.8bc158ff.js"><link rel="prefetch" href="/objection.js/assets/js/71.1caae563.js"><link rel="prefetch" href="/objection.js/assets/js/72.9fe3e8ea.js"><link rel="prefetch" href="/objection.js/assets/js/73.adc7a66e.js"><link rel="prefetch" href="/objection.js/assets/js/74.ca611b91.js"><link rel="prefetch" href="/objection.js/assets/js/75.3f83663e.js"><link rel="prefetch" href="/objection.js/assets/js/8.e75082ac.js"><link rel="prefetch" href="/objection.js/assets/js/9.894cd644.js"><link rel="prefetch" href="/objection.js/assets/js/vendors~docsearch.08d45e08.js">
    <link rel="stylesheet" href="/objection.js/assets/css/0.styles.3da53256.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/objection.js/" class="home-link router-link-active"><!----> <span class="site-name">Objection.js</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/objection.js/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Reference" class="dropdown-title"><span class="title">API Reference</span> <span class="arrow down"></span></button> <button type="button" aria-label="API Reference" class="mobile-dropdown-title"><span class="title">API Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/api/objection/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Main Module
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/query-builder/" class="nav-link">
  Query Builder
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/model/" class="nav-link">
  Model
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/types/" class="nav-link">
  Types
</a></li></ul></div></div><div class="nav-item"><a href="/objection.js/recipes/" class="nav-link">
  Recipe Book
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Release Notes" class="dropdown-title"><span class="title">Release Notes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Release Notes" class="mobile-dropdown-title"><span class="title">Release Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/changelog.html" class="nav-link">
  Changelog
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/migration.html" class="nav-link">
  Migration to 3.0
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v2/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v2.x documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v1/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐ Star
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/objection.js/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Reference" class="dropdown-title"><span class="title">API Reference</span> <span class="arrow down"></span></button> <button type="button" aria-label="API Reference" class="mobile-dropdown-title"><span class="title">API Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/api/objection/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Main Module
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/query-builder/" class="nav-link">
  Query Builder
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/model/" class="nav-link">
  Model
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/types/" class="nav-link">
  Types
</a></li></ul></div></div><div class="nav-item"><a href="/objection.js/recipes/" class="nav-link">
  Recipe Book
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Release Notes" class="dropdown-title"><span class="title">Release Notes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Release Notes" class="mobile-dropdown-title"><span class="title">Release Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/changelog.html" class="nav-link">
  Changelog
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/migration.html" class="nav-link">
  Migration to 3.0
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v2/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v2.x documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v1/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x documentation
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐ Star
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>module objection</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/objection.js/api/objection/#model" class="sidebar-link">Model</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#initialize" class="sidebar-link">initialize</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#transaction" class="sidebar-link">transaction</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#ref" class="sidebar-link">ref</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#raw" class="sidebar-link">raw</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#val" class="sidebar-link">val</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#fn" class="sidebar-link">fn</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#mixin" class="sidebar-link">mixin</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#compose" class="sidebar-link">compose</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#snakecasemappers" class="sidebar-link">snakeCaseMappers</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#knexsnakecasemappers" class="sidebar-link">knexSnakeCaseMappers</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#knexidentifiermapping" class="sidebar-link">knexIdentifierMapping</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#validationerror" class="sidebar-link">ValidationError</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#notfounderror" class="sidebar-link">NotFoundError</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#dberror" class="sidebar-link">DBError</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#constraintviolationerror" class="sidebar-link">ConstraintViolationError</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#uniqueviolationerror" class="sidebar-link">UniqueViolationError</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#notnullviolationerror" class="sidebar-link">NotNullViolationError</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#foreignkeyviolationerror" class="sidebar-link">ForeignKeyViolationError</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#checkviolationerror" class="sidebar-link">CheckViolationError</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/objection.js/api/objection/#dataerror" class="sidebar-link">DataError</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="module-objection"><a href="#module-objection" class="header-anchor">#</a> <code>module</code> objection</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> objection <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Model<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The objection module is what you get when you import objection. It has a bunch of properties that are listed below.</p> <h2 id="model"><a href="#model" class="header-anchor">#</a> Model</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Model <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="/objection.js/api/model/">The model class</a></p> <h2 id="initialize"><a href="#initialize" class="header-anchor">#</a> initialize</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> initialize <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For some queries objection needs to perform asynchronous operations in preparation, like fetch table metadata from the db. Objection does these preparations on-demand the first time such query is executed. However, some methods like <code>toKnexQuery</code> need these preparations to have been made so that the query can be built synchronously. In these cases you can use <code>initialize</code> to &quot;warm up&quot; the models and do all needed async preparations needed. You only need to call this function once if you choose to use it.</p> <p>Calling this function is completely optional. If some method requires this to have been called, they will throw a clear error message asking you to do so. These cases are extremely rare, but this function is here for those cases.</p> <p>You can also call this function if you want to be in control of when these async preparation operations get executed. It can be helpful for example in tests.</p> <h5 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> initialize <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> <span class="token function">initialize</span><span class="token punctuation">(</span>knex<span class="token punctuation">,</span> <span class="token punctuation">[</span>Person<span class="token punctuation">,</span> Movie<span class="token punctuation">,</span> Pet<span class="token punctuation">,</span> SomeOtherModelClass<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If knex has been installed for the <code>Model</code> globally, you can omit the first argument.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> initialize <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Person<span class="token punctuation">,</span> Movie<span class="token punctuation">,</span> Pet<span class="token punctuation">,</span> SomeOtherModelClass<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="transaction"><a href="#transaction" class="header-anchor">#</a> transaction</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> transaction <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="/objection.js/guide/transactions.html">The transaction function</a></p> <h2 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Factory function that returns a <a href="/objection.js/api/types/#class-referencebuilder">ReferenceBuilder</a> instance, that makes it easier to refer to tables, columns, json attributes etc. <a href="/objection.js/api/types/#class-referencebuilder">ReferenceBuilder</a> can also be used to type cast and alias the references.</p> <p>See <a href="/objection.js/api/types/#type-fieldexpression">FieldExpression</a> for more information about how to refer to json fields.</p> <h5 id="examples-2"><a href="#examples-2" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> Model<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token string">'id'</span><span class="token punctuation">,</span>
    <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'Model.jsonColumn:details.name'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">castText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'Model.jsonColumn:details.age'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">castInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>
    <span class="token string">'OtherModel'</span><span class="token punctuation">,</span>
    <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'Model.jsonColumn:details.name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">castText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">'='</span><span class="token punctuation">,</span>
    <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'OtherModel.name'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'&gt;'</span><span class="token punctuation">,</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'OtherModel.ageLimit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>withGraphJoined</code> and <code>joinRelated</code> methods also use <code>:</code> as a separator which can lead to ambiquous queries when combined with json references. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>jsonColumn:details.name
</code></pre></div><p>Can mean two things:</p> <ol><li>column <code>name</code> of the relation <code>jsonColumn.details</code></li> <li>field <code>name</code> of the <code>details</code> object inside <code>jsonColumn</code> column</li></ol> <p>When used with <code>withGraphJoined</code> and <code>joinRelated</code> you can use the <code>from</code> method of the <code>ReferenceBuilder</code> to specify the table:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> Person<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">withGraphJoined</span><span class="token punctuation">(</span><span class="token string">'children.children'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'jsonColumn:details.name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'children:children'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'Jennifer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="raw"><a href="#raw" class="header-anchor">#</a> raw</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> raw <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Factory function that returns a <a href="/objection.js/api/types/#class-rawbuilder">RawBuilder</a> instance. <a href="/objection.js/api/types/#class-rawbuilder">RawBuilder</a> is a wrapper for knex raw method that doesn't depend on knex. Instances of <a href="/objection.js/api/types/#class-rawbuilder">RawBuilder</a> are converted to knex raw instances lazily when the query is executed.</p> <p>Also see <a href="/objection.js/recipes/raw-queries.html">the raw query recipe</a>.</p> <h5 id="examples-3"><a href="#examples-3" class="header-anchor">#</a> Examples</h5> <p>When using raw SQL segments in queries, it's a good idea to use placeholders instead of adding user input directly to the SQL to avoid injection errors. Placeholders are sent to the database engine which then takes care of interpolating the SQL safely.</p> <p>You can use <code>??</code> as a placeholder for identifiers (column names, aliases etc.) and <code>?</code> for values.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> raw <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> Person<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token string">'coalesce(sum(??), 0) as ??'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'ageSum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'&lt;'</span><span class="token punctuation">,</span> <span class="token function">raw</span><span class="token punctuation">(</span><span class="token string">'? + ?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ageSum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can use <code>raw</code> in insert and update queries too:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> Person<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token function">raw</span><span class="token punctuation">(</span><span class="token string">'age + ?'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can also use named placeholders. <code>:someName:</code> for identifiers (column names, aliases etc.) and <code>:someName</code> for values.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> Person<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>
    <span class="token function">raw</span><span class="token punctuation">(</span><span class="token string">'coalesce(sum(:sumColumn:), 0) as :alias:'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">sumColumn</span><span class="token operator">:</span> <span class="token string">'age'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'ageSum'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>
    <span class="token string">'age'</span><span class="token punctuation">,</span>
    <span class="token string">'&lt;'</span><span class="token punctuation">,</span>
    <span class="token function">raw</span><span class="token punctuation">(</span><span class="token string">':value1 + :value2'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">value1</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      <span class="token literal-property property">value2</span><span class="token operator">:</span> <span class="token number">25</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can nest <code>ref</code>, <code>raw</code>, <code>val</code> and query builders (both knex and objection) in <code>raw</code> calls</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> val <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span>

<span class="token keyword">await</span> Person
  <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token string">'coalesce(:sumQuery, 0) as :alias:'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">sumQuery</span><span class="token operator">:</span> Person<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'ageSum'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'&lt;'</span><span class="token punctuation">,</span> <span class="token function">raw</span><span class="token punctuation">(</span><span class="token string">':value1 + :value2'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value1</span><span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
    <span class="token literal-property property">value2</span><span class="token operator">:</span> knex<span class="token punctuation">.</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token string">'25'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="val"><a href="#val" class="header-anchor">#</a> val</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> val <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Factory function that returns a <a href="/objection.js/api/types/#class-valuebuilder">ValueBuilder</a> instance. <a href="/objection.js/api/types/#class-valuebuilder">ValueBuilder</a> helps build values of different types.</p> <h5 id="examples-4"><a href="#examples-4" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> val<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Compare json objects</span>
<span class="token keyword">await</span> Model<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>
  <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'Model.jsonColumn:details'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'='</span><span class="token punctuation">,</span>
  <span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Jennifer'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">29</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Insert an array.</span>
<span class="token keyword">await</span> Model<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">numbers</span><span class="token operator">:</span> <span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">asArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">castTo</span><span class="token punctuation">(</span><span class="token string">'real[]'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="fn"><a href="#fn" class="header-anchor">#</a> fn</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> fn <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Factory function that returns a <a href="/objection.js/api/types/#class-functionbuilder">FunctionBuilder</a> instance. <code>fn</code> helps calling SQL functions. The signature is:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> functionBuilder <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>functionName<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'coalesce'</span><span class="token punctuation">,</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>fn</code> function also has shortcuts for most common functions:</p> <div class="language-js extra-class"><pre class="language-js"><code>fn<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span>precision<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">coalesce</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">upper</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span><span class="token function">lower</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>All arguments are interpreted as values by default. Use <code>ref</code> to refer to columns. you can also pass <code>raw</code> instances, other <code>fn</code> instances, <code>QueryBuilders</code> knex builders, knex raw and anything else just like to any other objection method.</p> <h5 id="examples-5"><a href="#examples-5" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> fn<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Compare nullable numbers</span>
<span class="token keyword">await</span> Model<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'coalesce'</span><span class="token punctuation">,</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// The same example using the fn.coalesce shortcut</span>
<span class="token keyword">await</span> Model<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">coalesce</span><span class="token punctuation">(</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Note that it can often be cleaner to use <code>raw</code> or <code>whereRaw</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> Model<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">whereRaw</span><span class="token punctuation">(</span><span class="token string">'coalesce(age, 0) &gt; ?'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="mixin"><a href="#mixin" class="header-anchor">#</a> mixin</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> mixin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The mixin helper for applying multiple <a href="/objection.js/guide/plugins.html">plugins</a>.</p> <h5 id="examples-6"><a href="#examples-6" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> mixin<span class="token punctuation">,</span> Model <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">mixin</span><span class="token punctuation">(</span>Model<span class="token punctuation">,</span> <span class="token punctuation">[</span>
  SomeMixin<span class="token punctuation">,</span>
  SomeOtherMixin<span class="token punctuation">,</span>
  EvenMoreMixins<span class="token punctuation">,</span>
  LolSoManyMixins<span class="token punctuation">,</span>
  <span class="token function">ImAMixinWithOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="compose"><a href="#compose" class="header-anchor">#</a> compose</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> compose <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The compose helper for applying multiple <a href="/objection.js/guide/plugins.html">plugins</a>.</p> <h5 id="examples-7"><a href="#examples-7" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> compose<span class="token punctuation">,</span> Model <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mixins <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>
  SomeMixin<span class="token punctuation">,</span>
  SomeOtherMixin<span class="token punctuation">,</span>
  EvenMoreMixins<span class="token punctuation">,</span>
  LolSoManyMixins<span class="token punctuation">,</span>
  <span class="token function">ImAMixinWithOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">mixins</span><span class="token punctuation">(</span>Model<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="snakecasemappers"><a href="#snakecasemappers" class="header-anchor">#</a> snakeCaseMappers</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> snakeCaseMappers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Function for adding snake_case to camelCase conversion to objection models. Better documented <a href="/objection.js/recipes/snake-case-to-camel-case-conversion.html">here</a>. The <code>snakeCaseMappers</code> function accepts an options object. The available options are:</p> <table><thead><tr><th>Option</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>upperCase</td> <td>boolean</td> <td><code>false</code></td> <td>Set to <code>true</code> if your columns are UPPER_SNAKE_CASED.</td></tr> <tr><td>underscoreBeforeDigits</td> <td>boolean</td> <td><code>false</code></td> <td>When <code>true</code>, will place an underscore before digits (<code>foo1Bar2</code> becomes <code>foo_1_bar_2</code>). When <code>false</code>, <code>foo1Bar2</code> becomes <code>foo1_bar2</code>.</td></tr> <tr><td>underscoreBetweenUppercaseLetters</td> <td>boolean</td> <td><code>false</code></td> <td>When <code>true</code>, will place underscores between consecutive uppercase letters (<code>fooBAR</code> becomes <code>foo_b_a_r</code>). When <code>false</code>, <code>fooBAR</code> will become <code>foo_bar</code>.</td></tr></tbody></table> <h5 id="examples-8"><a href="#examples-8" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Model<span class="token punctuation">,</span> snakeCaseMappers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">columnNameMappers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">snakeCaseMappers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If your columns are UPPER_SNAKE_CASE</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Model<span class="token punctuation">,</span> snakeCaseMappers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">columnNameMappers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">snakeCaseMappers</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">upperCase</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="knexsnakecasemappers"><a href="#knexsnakecasemappers" class="header-anchor">#</a> knexSnakeCaseMappers</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> knexSnakeCaseMappers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Function for adding a snake_case to camelCase conversion to <code>knex</code>. Better documented <a href="/objection.js/recipes/snake-case-to-camel-case-conversion.html">here</a>. The <code>knexSnakeCaseMappers</code> function accepts an options object. The available options are:</p> <table><thead><tr><th>Option</th> <th>Type</th> <th>Default</th> <th>Description</th></tr></thead> <tbody><tr><td>upperCase</td> <td>boolean</td> <td><code>false</code></td> <td>Set to <code>true</code> if your columns are UPPER_SNAKE_CASED.</td></tr> <tr><td>underscoreBeforeDigits</td> <td>boolean</td> <td><code>false</code></td> <td>When <code>true</code>, will place an underscore before digits (<code>foo1Bar2</code> becomes <code>foo_1_bar_2</code>). When <code>false</code>, <code>foo1Bar2</code> becomes <code>foo1_bar2</code>.</td></tr> <tr><td>underscoreBetweenUppercaseLetters</td> <td>boolean</td> <td><code>false</code></td> <td>When <code>true</code>, will place underscores between consecutive uppercase letters (<code>fooBAR</code> becomes <code>foo_b_a_r</code>). When <code>false</code>, <code>fooBAR</code> will become <code>foo_bar</code>.</td></tr></tbody></table> <h5 id="examples-9"><a href="#examples-9" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> knexSnakeCaseMappers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Knex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'knex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> knex <span class="token operator">=</span> <span class="token function">Knex</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token string">'postgres'</span><span class="token punctuation">,</span>

  <span class="token literal-property property">connection</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'objection'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">'objection_test'</span>
  <span class="token punctuation">}</span>

  <span class="token operator">...</span><span class="token function">knexSnakeCaseMappers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If your columns are UPPER_SNAKE_CASE</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> knexSnakeCaseMappers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Knex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'knex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> knex <span class="token operator">=</span> <span class="token function">Knex</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token string">'postgres'</span><span class="token punctuation">,</span>

  <span class="token literal-property property">connection</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'objection'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">'objection_test'</span>
  <span class="token punctuation">}</span>

  <span class="token operator">...</span><span class="token function">knexSnakeCaseMappers</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">upperCase</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For older nodes:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Knex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'knex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> knexSnakeCaseMappers <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>knexSnakeCaseMappers<span class="token punctuation">;</span>

<span class="token keyword">const</span> knex <span class="token operator">=</span> <span class="token function">Knex</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token string">'postgres'</span><span class="token punctuation">,</span>

  <span class="token literal-property property">connection</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'objection'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">'objection_test'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token operator">...</span><span class="token function">knexSnakeCaseMappers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="knexidentifiermapping"><a href="#knexidentifiermapping" class="header-anchor">#</a> knexIdentifierMapping</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> knexIdentifierMapping <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Like <a href="/objection.js/api/objection/#knexsnakecasemappers">knexSnakeCaseMappers</a>, but can be used to make an arbitrary static mapping between column names and property names. In the examples, you would have identifiers <code>MyId</code>, <code>MyProp</code> and <code>MyAnotherProp</code> in the database and you would like to map them into <code>id</code>, <code>prop</code> and <code>anotherProp</code> in the code.</p> <h5 id="examples-10"><a href="#examples-10" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> knexIdentifierMapping <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Knex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'knex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> knex <span class="token operator">=</span> <span class="token function">Knex</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token string">'postgres'</span><span class="token punctuation">,</span>

  <span class="token literal-property property">connection</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'objection'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">'objection_test'</span>
  <span class="token punctuation">}</span>

  <span class="token operator">...</span><span class="token function">knexIdentifierMapping</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">MyId</span><span class="token operator">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">MyProp</span><span class="token operator">:</span> <span class="token string">'prop'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">MyAnotherProp</span><span class="token operator">:</span> <span class="token string">'anotherProp'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Note that you can pretty easily define the conversions in some static property of your model. In this example we have added a property <code>column</code> to jsonSchema and use that to create the mapping object.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> knexIdentifierMapping <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Knex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'knex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Path to your model folder.</span>
<span class="token keyword">const</span> <span class="token constant">MODELS_PATH</span> <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'models'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> knex <span class="token operator">=</span> <span class="token function">Knex</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token string">'postgres'</span><span class="token punctuation">,</span>

  <span class="token literal-property property">connection</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'objection'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">'objection_test'</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Go through all models and add conversions using the custom property</span>
  <span class="token comment">// `column` in json schema.</span>
  <span class="token operator">...</span><span class="token function">knexIdentifierMapping</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span><span class="token constant">MODELS_PATH</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> it<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">it</span> <span class="token operator">=&gt;</span> <span class="token function">require</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">MODELS_PATH</span><span class="token punctuation">,</span> it<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mapping<span class="token punctuation">,</span> modelClass</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> properties <span class="token operator">=</span> modelClass<span class="token punctuation">.</span>jsonSchema<span class="token punctuation">.</span>properties<span class="token punctuation">;</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mapping<span class="token punctuation">,</span> propName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        mapping<span class="token punctuation">[</span>properties<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span> <span class="token operator">=</span> propName<span class="token punctuation">;</span>
        <span class="token keyword">return</span> mapping<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> mapping<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For older nodes:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Knex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'knex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> knexIdentifierMapping <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>knexIdentifierMapping<span class="token punctuation">;</span>

<span class="token keyword">const</span> knex <span class="token operator">=</span> <span class="token function">Knex</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token string">'postgres'</span><span class="token punctuation">,</span>

  <span class="token literal-property property">connection</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'objection'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">'objection_test'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token operator">...</span><span class="token function">knexIdentifierMapping</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">MyId</span><span class="token operator">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">MyProp</span><span class="token operator">:</span> <span class="token string">'prop'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">MyAnotherProp</span><span class="token operator">:</span> <span class="token string">'anotherProp'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="validationerror"><a href="#validationerror" class="header-anchor">#</a> ValidationError</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ValidationError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="/objection.js/api/types/#class-validationerror">ValidationError</a> class.</p> <h2 id="notfounderror"><a href="#notfounderror" class="header-anchor">#</a> NotFoundError</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> NotFoundError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="/objection.js/api/types/#class-notfounderror">NotFoundError</a> class.</p> <h2 id="dberror"><a href="#dberror" class="header-anchor">#</a> DBError</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> DBError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="https://github.com/Vincit/db-errors#dberror" target="_blank" rel="noopener noreferrer">DBError<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from <a href="https://github.com/Vincit/db-errors" target="_blank" rel="noopener noreferrer">db-errors<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> library.</p> <h2 id="constraintviolationerror"><a href="#constraintviolationerror" class="header-anchor">#</a> ConstraintViolationError</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ConstraintViolationError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="https://github.com/Vincit/db-errors#constraintviolationerror" target="_blank" rel="noopener noreferrer">ConstraintViolationError<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from <a href="https://github.com/Vincit/db-errors" target="_blank" rel="noopener noreferrer">db-errors<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> library.</p> <h2 id="uniqueviolationerror"><a href="#uniqueviolationerror" class="header-anchor">#</a> UniqueViolationError</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> UniqueViolationError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="https://github.com/Vincit/db-errors#uniqueviolationerror" target="_blank" rel="noopener noreferrer">UniqueViolationError<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from <a href="https://github.com/Vincit/db-errors" target="_blank" rel="noopener noreferrer">db-errors<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> library.</p> <h2 id="notnullviolationerror"><a href="#notnullviolationerror" class="header-anchor">#</a> NotNullViolationError</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> NotNullViolationError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="https://github.com/Vincit/db-errors#notnullviolationerror" target="_blank" rel="noopener noreferrer">NotNullViolationError<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from <a href="https://github.com/Vincit/db-errors" target="_blank" rel="noopener noreferrer">db-errors<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> library.</p> <h2 id="foreignkeyviolationerror"><a href="#foreignkeyviolationerror" class="header-anchor">#</a> ForeignKeyViolationError</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ForeignKeyViolationError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="https://github.com/Vincit/db-errors#foreignkeyviolationerror" target="_blank" rel="noopener noreferrer">ForeignKeyViolationError<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from <a href="https://github.com/Vincit/db-errors" target="_blank" rel="noopener noreferrer">db-errors<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> library.</p> <h2 id="checkviolationerror"><a href="#checkviolationerror" class="header-anchor">#</a> CheckViolationError</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CheckViolationError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="https://github.com/Vincit/db-errors#checkviolationerror" target="_blank" rel="noopener noreferrer">CheckViolationError<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from <a href="https://github.com/Vincit/db-errors" target="_blank" rel="noopener noreferrer">db-errors<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> library.</p> <h2 id="dataerror"><a href="#dataerror" class="header-anchor">#</a> DataError</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> DataError <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="https://github.com/Vincit/db-errors#dataerror" target="_blank" rel="noopener noreferrer">DataError<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from <a href="https://github.com/Vincit/db-errors" target="_blank" rel="noopener noreferrer">db-errors<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> library.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/objection.js/assets/js/app.51116b66.js" defer></script><script src="/objection.js/assets/js/2.95f20b73.js" defer></script><script src="/objection.js/assets/js/1.317fd1a4.js" defer></script><script src="/objection.js/assets/js/34.aebcecdc.js" defer></script>
  </body>
</html>
