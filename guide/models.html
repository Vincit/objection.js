<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Models | Objection.js</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="An SQL friendly ORM for node.js">
    <link rel="preload" href="/objection.js/assets/css/0.styles.0f46ca33.css" as="style"><link rel="preload" href="/objection.js/assets/js/app.8dd7d762.js" as="script"><link rel="preload" href="/objection.js/assets/js/6.7d5e48c0.js" as="script"><link rel="preload" href="/objection.js/assets/js/7.0f19e18f.js" as="script"><link rel="preload" href="/objection.js/assets/js/2.0054fdf2.js" as="script"><link rel="prefetch" href="/objection.js/assets/js/1.badd168a.js"><link rel="prefetch" href="/objection.js/assets/js/10.e61524f2.js"><link rel="prefetch" href="/objection.js/assets/js/11.4052b195.js"><link rel="prefetch" href="/objection.js/assets/js/12.6f6ccbb5.js"><link rel="prefetch" href="/objection.js/assets/js/13.03f26a8c.js"><link rel="prefetch" href="/objection.js/assets/js/14.e876ffb7.js"><link rel="prefetch" href="/objection.js/assets/js/15.88b4f06c.js"><link rel="prefetch" href="/objection.js/assets/js/16.d7625109.js"><link rel="prefetch" href="/objection.js/assets/js/17.dc2ae831.js"><link rel="prefetch" href="/objection.js/assets/js/18.c859dfdf.js"><link rel="prefetch" href="/objection.js/assets/js/19.b1eebbb1.js"><link rel="prefetch" href="/objection.js/assets/js/20.866c1b0f.js"><link rel="prefetch" href="/objection.js/assets/js/21.a505508e.js"><link rel="prefetch" href="/objection.js/assets/js/22.79c8a052.js"><link rel="prefetch" href="/objection.js/assets/js/23.93cf0e92.js"><link rel="prefetch" href="/objection.js/assets/js/24.f8adb0ce.js"><link rel="prefetch" href="/objection.js/assets/js/25.1c203468.js"><link rel="prefetch" href="/objection.js/assets/js/26.c741e666.js"><link rel="prefetch" href="/objection.js/assets/js/27.54f6c9fc.js"><link rel="prefetch" href="/objection.js/assets/js/28.89492b12.js"><link rel="prefetch" href="/objection.js/assets/js/29.a959d614.js"><link rel="prefetch" href="/objection.js/assets/js/3.b3ce0911.js"><link rel="prefetch" href="/objection.js/assets/js/30.4433048c.js"><link rel="prefetch" href="/objection.js/assets/js/31.fb10771f.js"><link rel="prefetch" href="/objection.js/assets/js/32.dff1f06a.js"><link rel="prefetch" href="/objection.js/assets/js/33.0a4b2662.js"><link rel="prefetch" href="/objection.js/assets/js/34.321d9867.js"><link rel="prefetch" href="/objection.js/assets/js/35.55b562f7.js"><link rel="prefetch" href="/objection.js/assets/js/36.06f7c627.js"><link rel="prefetch" href="/objection.js/assets/js/37.f090f8fc.js"><link rel="prefetch" href="/objection.js/assets/js/38.ab9a0cfe.js"><link rel="prefetch" href="/objection.js/assets/js/39.f3633191.js"><link rel="prefetch" href="/objection.js/assets/js/40.67b55ad8.js"><link rel="prefetch" href="/objection.js/assets/js/41.77758b3a.js"><link rel="prefetch" href="/objection.js/assets/js/42.0de28e20.js"><link rel="prefetch" href="/objection.js/assets/js/43.3e5cc82b.js"><link rel="prefetch" href="/objection.js/assets/js/44.f86e3c7c.js"><link rel="prefetch" href="/objection.js/assets/js/45.a824fc9b.js"><link rel="prefetch" href="/objection.js/assets/js/46.8c7551d2.js"><link rel="prefetch" href="/objection.js/assets/js/47.fddda9b6.js"><link rel="prefetch" href="/objection.js/assets/js/48.4c8bd88f.js"><link rel="prefetch" href="/objection.js/assets/js/49.075c5305.js"><link rel="prefetch" href="/objection.js/assets/js/50.c70a0ac5.js"><link rel="prefetch" href="/objection.js/assets/js/51.d30027a1.js"><link rel="prefetch" href="/objection.js/assets/js/52.7bf885a4.js"><link rel="prefetch" href="/objection.js/assets/js/53.fe4ad436.js"><link rel="prefetch" href="/objection.js/assets/js/54.d1396a31.js"><link rel="prefetch" href="/objection.js/assets/js/55.a8c3d29a.js"><link rel="prefetch" href="/objection.js/assets/js/56.ce15257f.js"><link rel="prefetch" href="/objection.js/assets/js/57.79f9cfdf.js"><link rel="prefetch" href="/objection.js/assets/js/8.d3fea037.js"><link rel="prefetch" href="/objection.js/assets/js/9.a610c6c3.js"><link rel="prefetch" href="/objection.js/assets/js/vendors~docsearch.d2b1c980.js">
    <link rel="stylesheet" href="/objection.js/assets/css/0.styles.0f46ca33.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/objection.js/" class="home-link router-link-active"><!----> <span class="site-name">Objection.js</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/objection.js/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Reference" class="dropdown-title"><span class="title">API Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/api/objection/" class="nav-link">
  Main Module
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/query-builder/" class="nav-link">
  Query Builder
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/model/" class="nav-link">
  Model
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/types/" class="nav-link">
  Types
</a></li></ul></div></div><div class="nav-item"><a href="/objection.js/recipes/" class="nav-link">
  Recipe Book
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Release Notes" class="dropdown-title"><span class="title">Release Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/changelog.html" class="nav-link">
  Changelog
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/migration.html" class="nav-link">
  Migration to 2.0
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v1/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x documentation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐ Star
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/objection.js/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API Reference" class="dropdown-title"><span class="title">API Reference</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/api/objection/" class="nav-link">
  Main Module
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/query-builder/" class="nav-link">
  Query Builder
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/model/" class="nav-link">
  Model
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/api/types/" class="nav-link">
  Types
</a></li></ul></div></div><div class="nav-item"><a href="/objection.js/recipes/" class="nav-link">
  Recipe Book
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Release Notes" class="dropdown-title"><span class="title">Release Notes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/changelog.html" class="nav-link">
  Changelog
</a></li><li class="dropdown-item"><!----> <a href="/objection.js/release-notes/migration.html" class="nav-link">
  Migration to 2.0
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Vincit/objection.js/tree/v1/doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x documentation
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐ Star
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/objection.js/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/objection.js/guide/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/objection.js/guide/models.html" class="active sidebar-link">Models</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/objection.js/guide/models.html#examples" class="sidebar-link">Examples</a></li></ul></li><li><a href="/objection.js/guide/relations.html" class="sidebar-link">Relations</a></li><li><a href="/objection.js/guide/query-examples.html" class="sidebar-link">Query examples</a></li><li><a href="/objection.js/guide/transactions.html" class="sidebar-link">Transactions</a></li><li><a href="/objection.js/guide/hooks.html" class="sidebar-link">Hooks</a></li><li><a href="/objection.js/guide/validation.html" class="sidebar-link">Validation</a></li><li><a href="/objection.js/guide/documents.html" class="sidebar-link">Documents</a></li><li><a href="/objection.js/guide/plugins.html" class="sidebar-link">Plugins</a></li><li><a href="/objection.js/guide/contributing.html" class="sidebar-link">Contribution guide</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="models"><a href="#models" class="header-anchor">#</a> Models</h1> <p>A <a href="/objection.js/api/model/">Model</a> subclass represents a database table and instances of that class represent table rows. Models are created by inheriting from the <a href="/objection.js/api/model/">Model</a> class. A <a href="/objection.js/api/model/">Model</a> class can define <a href="/objection.js/guide/relations.html">relationships</a> (aka. relations, associations) to other models using the static <a href="/objection.js/api/model/static-properties.html#static-relationmappings">relationMappings</a> property.</p> <p>Models can optionally define a <a href="/objection.js/api/model/static-properties.html#static-jsonschema">jsonSchema</a> object that is used for input validation. Every time a <a href="/objection.js/api/model/">Model</a> instance is created, it is validated against the <a href="/objection.js/api/model/static-properties.html#static-jsonschema">jsonSchema</a>. Note that <a href="/objection.js/api/model/">Model</a> instances are implicitly created whenever you call <a href="/objection.js/api/query-builder/mutate-methods.html#insert">insert</a>, <a href="/objection.js/api/query-builder/mutate-methods.html#insertgraph">insertGraph</a>, <a href="/objection.js/api/query-builder/mutate-methods.html#patch">patch</a> or any other method that takes in model properties (no validation is done when reading from the database).</p> <p>Each model must have an identifier column. The identifier column name can be set using the <a href="/objection.js/api/model/static-properties.html#static-idcolumn">idColumn</a> property. <a href="/objection.js/api/model/static-properties.html#static-idcolumn">idColumn</a> defaults to <code>&quot;id&quot;</code>. If your table's identifier is something else, you need to set <a href="/objection.js/api/model/static-properties.html#static-idcolumn">idColumn</a>. A composite id can be set by giving an array of column names. Composite keys are first class citizens in objection.</p> <p>In objection, all configuration is done through <a href="/objection.js/api/model/">Model</a> classes and there is no global configuration or state. There is no &quot;objection instance&quot;. This allows you to create isolated components and for example to use multiple different databases with different configurations in one app. Most of the time you want the same configuration for all models and a good pattern is to create a <code>BaseModel</code> class and inherit all your models from that. You can then add all shared configuration to <code>BaseModel</code>. See the static properties in <a href="/objection.js/api/model/static-properties.html#static-tablename">API Reference / Model</a> section for all available configuration options.</p> <p>Note that in addition to <code>idColumn</code>, you don't define properties, indexes or anything else related to database schema in the model. In objection, database schema is considered a separate concern and should be handled using <a href="https://knexjs.org/#Migrations" target="_blank" rel="noopener noreferrer">migrations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The reasoning is that every non-trivial project will need migrations anyway. Managing the schema in two places (model and migrations) only makes things more complex in the long run.</p> <h2 id="examples"><a href="#examples" class="header-anchor">#</a> Examples</h2> <p>A working model with minimal amount of code:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Model <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MinimalModel</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">tableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'someTableName'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MinimalModel<span class="token punctuation">;</span>
</code></pre></div><p>Model with custom methods, json schema validation and relations. This model is used in the examples:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Model <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token comment">// Table name is the only required property.</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">tableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'persons'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Each model must have a column (or a set of columns) that uniquely</span>
  <span class="token comment">// identifies the rows. The column(s) can be specified using the `idColumn`</span>
  <span class="token comment">// property. `idColumn` returns `id` by default and doesn't need to be</span>
  <span class="token comment">// specified unless the model's primary key is something else.</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">idColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'id'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Methods can be defined for model classes just as you would for</span>
  <span class="token comment">// any JavaScript class. If you want to include the result of these</span>
  <span class="token comment">// method in the output json, see `virtualAttributes`.</span>
  <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Optional JSON schema. This is not the database schema!</span>
  <span class="token comment">// No tables or columns are generated based on this. This is only</span>
  <span class="token comment">// used for input validation. Whenever a model instance is created</span>
  <span class="token comment">// either explicitly or implicitly it is checked against this schema.</span>
  <span class="token comment">// See http://json-schema.org/ for more info.</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">jsonSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'firstName'</span><span class="token punctuation">,</span> <span class="token string">'lastName'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

      properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'integer'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        parentId<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'integer'</span><span class="token punctuation">,</span> <span class="token string">'null'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        firstName<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> minLength<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> maxLength<span class="token operator">:</span> <span class="token number">255</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        lastName<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> minLength<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> maxLength<span class="token operator">:</span> <span class="token number">255</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'number'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">// Properties defined as objects or arrays are</span>
        <span class="token comment">// automatically converted to JSON strings when</span>
        <span class="token comment">// writing to database and back to objects and arrays</span>
        <span class="token comment">// when reading from database. To override this</span>
        <span class="token comment">// behaviour, you can override the</span>
        <span class="token comment">// Model.jsonAttributes property.</span>
        address<span class="token operator">:</span> <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
          properties<span class="token operator">:</span> <span class="token punctuation">{</span>
            street<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            city<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            zipCode<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">'string'</span> <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// This object defines the relations to other models.</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">relationMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Importing models here is a one way to avoid require loops.</span>
    <span class="token keyword">const</span> Animal <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./Animal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> Movie <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./Movie'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      pets<span class="token operator">:</span> <span class="token punctuation">{</span>
        relation<span class="token operator">:</span> Model<span class="token punctuation">.</span>HasManyRelation<span class="token punctuation">,</span>
        <span class="token comment">// The related model. This can be either a Model</span>
        <span class="token comment">// subclass constructor or an absolute file path</span>
        <span class="token comment">// to a module that exports one. We use a model</span>
        <span class="token comment">// subclass constructor `Animal` here.</span>
        modelClass<span class="token operator">:</span> Animal<span class="token punctuation">,</span>
        join<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'persons.id'</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">'animals.ownerId'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      movies<span class="token operator">:</span> <span class="token punctuation">{</span>
        relation<span class="token operator">:</span> Model<span class="token punctuation">.</span>ManyToManyRelation<span class="token punctuation">,</span>
        modelClass<span class="token operator">:</span> Movie<span class="token punctuation">,</span>
        join<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'persons.id'</span><span class="token punctuation">,</span>
          <span class="token comment">// ManyToMany relation needs the `through` object</span>
          <span class="token comment">// to describe the join table.</span>
          through<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// If you have a model class for the join table</span>
            <span class="token comment">// you need to specify it like this:</span>
            <span class="token comment">// modelClass: PersonMovie,</span>
            <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'persons_movies.personId'</span><span class="token punctuation">,</span>
            to<span class="token operator">:</span> <span class="token string">'persons_movies.movieId'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">'movies.id'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      children<span class="token operator">:</span> <span class="token punctuation">{</span>
        relation<span class="token operator">:</span> Model<span class="token punctuation">.</span>HasManyRelation<span class="token punctuation">,</span>
        modelClass<span class="token operator">:</span> Person<span class="token punctuation">,</span>
        join<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'persons.id'</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">'persons.parentId'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      parent<span class="token operator">:</span> <span class="token punctuation">{</span>
        relation<span class="token operator">:</span> Model<span class="token punctuation">.</span>BelongsToOneRelation<span class="token punctuation">,</span>
        modelClass<span class="token operator">:</span> Person<span class="token punctuation">,</span>
        join<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'persons.parentId'</span><span class="token punctuation">,</span>
          to<span class="token operator">:</span> <span class="token string">'persons.id'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/objection.js/guide/getting-started.html" class="prev">
        Getting started
      </a></span> <span class="next"><a href="/objection.js/guide/relations.html">
        Relations
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/objection.js/assets/js/app.8dd7d762.js" defer></script><script src="/objection.js/assets/js/6.7d5e48c0.js" defer></script><script src="/objection.js/assets/js/7.0f19e18f.js" defer></script><script src="/objection.js/assets/js/2.0054fdf2.js" defer></script>
  </body>
</html>
